<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OptimoRoute - Route Optimizer</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Leaflet Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <link rel="stylesheet" href="templates.css" />
</head>
<body>
    <!-- Top Navigation -->
    <nav class="top-nav ">
        <div class="nav-brand">
            <i class="fas fa-route"></i>
            KMKC
        </div>

        <div class="nav-right">
            <div class="nav-buttons">
                <button class="nav-btn">
                <i class="fas fa-user-plus"></i> Add Customer
            </button>
                <button class="nav-btn">
                    <i class="fas fa-play"></i> Get started
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="planning-section">
                    <h5 class="mb-0">
                        <i class="fas fa-calendar-alt"></i> Plan and Optimize
                    </h5>
                </div>


                <div class="action-buttons">
                    <button class="btn-primary" onclick="optimizeRoutes()">
                        <i class="fas fa-magic"></i> Optimize
                    </button>
                    <button class="btn-outline" onclick="switchView()">
                        <i class="fas fa-exchange-alt"></i> Switch
                    </button>
                    <button class="btn-outline" onclick="reverseRoutes()">
                        <i class="fas fa-undo"></i> Reverse
                    </button>
                </div>

                <div class="mb-3">
                    <button class="btn-outline me-2" onclick="copyRoutes()">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                    <input type="checkbox" id="unschedule" class="me-1">
                    <label for="unschedule" style="font-size: 0.875rem;">Unschedule</label>
                </div>
            </div>

            <div class="drivers-section">
                <h6 class="mb-3 px-2">
                    <i class="fas fa-truck"></i> Driver
                    <span class="badge bg-primary rounded-pill ms-2">4 drivers selected</span>
                </h6>

                <!-- Driver List -->
                <div class="driver-item selected" onclick="toggleDriver(this, '0001')">
                    <input type="checkbox" class="driver-checkbox" checked>
                    <div class="driver-color" style="background-color: #ef4444;"></div>
                    <div class="driver-info">
                        <div class="driver-name">Driver 001</div>
                        <div class="driver-stats">
<!--                            <span><i class="fas fa-clock"></i> 7h 57m</span>-->
<!--                            <span><i class="fas fa-map-marker-alt"></i> Orders: 41</span>-->
<!--                            <span><i class="fas fa-route"></i> 120km</span>-->
                        </div>
                    </div>
                </div>

                <div class="driver-item selected" onclick="toggleDriver(this, '0002')">
                    <input type="checkbox" class="driver-checkbox" checked>
                    <div class="driver-color" style="background-color: #f97316;"></div>
                    <div class="driver-info">
                        <div class="driver-name">Driver 002</div>
                        <div class="driver-stats">
<!--                            <span><i class="fas fa-clock"></i> 7h 56m</span>-->
<!--                            <span><i class="fas fa-map-marker-alt"></i> Orders: 40</span>-->
<!--                            <span><i class="fas fa-route"></i> 98km</span>-->
                        </div>
                    </div>
                </div>

                <div class="driver-item selected" onclick="toggleDriver(this, '0003')">
                    <input type="checkbox" class="driver-checkbox" checked>
                    <div class="driver-color" style="background-color: #22c55e;"></div>
                    <div class="driver-info">
                        <div class="driver-name">Driver 003</div>
                        <div class="driver-stats">
<!--                            <span><i class="fas fa-clock"></i> 7h 54m</span>-->
<!--                            <span><i class="fas fa-map-marker-alt"></i> Orders: 58</span>-->
<!--                            <span><i class="fas fa-route"></i> 37km</span>-->
                        </div>
                    </div>
                </div>

                <div class="driver-item selected" onclick="toggleDriver(this, '0004')">
                    <input type="checkbox" class="driver-checkbox" checked>
                    <div class="driver-color" style="background-color: #0bd2f5;"></div>
                    <div class="driver-info">
                        <div class="driver-name">Driver 004</div>
                        <div class="driver-stats">
<!--                            <span><i class="fas fa-clock"></i> 7h 59m</span>-->
<!--                            <span><i class="fas fa-map-marker-alt"></i> Orders: 53</span>-->
<!--                            <span><i class="fas fa-route"></i> 58km</span>-->
                        </div>
                    </div>
                </div>
                <div class="driver-item" onclick="toggleDriver(this, '0005')">
                    <input type="checkbox" class="driver-checkbox">
                    <div class="driver-color" style="background-color: #6b7280;"></div>
                    <div class="driver-info">
                        <div class="driver-name">Driver 005</div>
                        <div class="driver-stats">
                            <span class="text-muted">Unassigned</span>
                        </div>
                    </div>
                </div>

                <div class="driver-item" onclick="toggleDriver(this, '0006')">
                    <input type="checkbox" class="driver-checkbox">
                    <div class="driver-color" style="background-color: #6b7280;"></div>
                    <div class="driver-info">
                        <div class="driver-name">Driver 006</div>
                        <div class="driver-stats">
                            <span class="text-muted">Unassigned</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="p-3 border-top">
                <button class="btn-outline w-100" onclick="hideDrivers()">
                    <i class="fas fa-eye-slash"></i> Hide Drivers
                </button>
            </div>
        </div>

        <div class="map-container">
            <div id="map"></div>

            <div class="map-controls">
                <button class="control-btn" onclick="centerMap()" title="Center Map">
                    <i class="fas fa-crosshairs"></i>
                </button>
                <button class="control-btn" onclick="zoomIn()" title="Zoom In">
                    <i class="fas fa-plus"></i>
                </button>
                <button class="control-btn" onclick="zoomOut()" title="Zoom Out">
                    <i class="fas fa-minus"></i>
                </button>
                <button class="control-btn" onclick="toggleSatellite()" title="Satellite View">
                    <i class="fas fa-satellite"></i>
                </button>
                <button class="control-btn" onclick="toggleTraffic()" title="Traffic">
                    <i class="fas fa-car"></i>
                </button>
                <button class="control-btn" onclick="exportMap()" title="Export">
                    <i class="fas fa-download"></i>
                </button>
                <button class="control-btn" onclick="fullScreen()" title="Full Screen">
                    <i class="fas fa-expand"></i>
                </button>
            </div>

            <div class="bottom-panel border-top bg-light">
                  <div class="d-flex justify-content-between align-items-center p-2">

                    <ul class="nav nav-tabs" id="panelTabs">
                      <li class="nav-item">
                        <a class="nav-link active" href="#" onclick="switchTab(this, 'orders')">
                          <i class="fas fa-list"></i> Orders
                        </a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="#" onclick="switchTab(this, 'routes')">
                          <i class="fas fa-route"></i> Routes
                        </a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="#" onclick="switchTab(this, 'timeline')">
                          <i class="fas fa-clock"></i> Timeline
                        </a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="#" onclick="switchTab(this, 'not-scheduled')">
                          <i class="fas fa-exclamation-triangle"></i> Not Scheduled
                        </a>
                      </li>
                    </ul>


                    <div class="d-flex align-items-center">
                          <input type="date" value="2025-09-27" class="form-control form-control-sm me-2" style="width: 150px;">
                          <button class="btn btn-primary btn-sm me-2" onclick="importOrders()">
                            <i class="fas fa-upload"></i> Import Orders
                          </button>
                          <button class="btn btn-success btn-sm me-2" onclick="optimizeRoutes()">
                            <i class="fas fa-route"></i> Plan Routes
                          </button>
                          <button class="btn btn-outline-secondary btn-sm" onclick="shareRoutes()">
                            <i class="fas fa-share"></i> Share Routes
                          </button>
                          <button class="btn btn-link ms-2" onclick="toggleBottomPanel()" title="Toggle Panel">
                            <i class="fas fa-chevron-down"></i>
                          </button>
                    </div>
                </div>

                <div class="panel-content">
                    <table class="orders-table">
                        <thead>
                            <tr>
                                <th><input type="checkbox" onchange="selectAllOrders(this)"></th>
                                <th>Order ID</th>
                                <th>Priority</th>
                                <th>Location</th>
                                <th>Address</th>
                                <th>Rescheduled order from</th>
                                <th>Rescheduled to</th>
                                <th>Weight [kg]</th>
                                <th>Volume [m3]</th>
                                <th>Duration</th>
                                <th>Time windows</th>
                                <th>Skills</th>
                                <th>Vehicle features</th>
                            </tr>
                        </thead>
                        <tbody id="orders-tbody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification" style="display: none;">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text">Routes have been planned</span>
        <button onclick="hideNotification()" style="background: none; border: none; color: white; margin-left: 1rem;">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <div class="loading" id="loading">
        <div class="spinner"></div>
        <div>Optimizing routes...</div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="../backend/temp.js"></script>
</body>
</html>